<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ru">


<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>FirstTime - Ramax</title>
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800">
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic,900,900italic">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/baguettebox.js/1.10.0/baguetteBox.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">

    <link rel="stylesheet" th:href="@{/css/Map-Clean.css}">
    <link rel="stylesheet" th:href="@{/fonts/font-awesome.min.css}">
    <link rel="stylesheet" th:href="@{/css/News-Cards.css}">
    <link rel="stylesheet" th:href="@{/css/responsive-blog-card-slider.css}">
    <link rel="stylesheet" th:href="@{/css/Responsive-Form-1.css}">
    <link rel="stylesheet" th:href="@{/css/Responsive-Form.css}">
    <link rel="stylesheet" th:href="@{/bootstrap/css/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/css/styles.min.css}">
    <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
</head>

<body id="page-top" data-bs-spy="scroll" data-bs-target="#mainNav" data-bs-offset="57">
<nav class="navbar navbar-light navbar-expand-lg fixed-top" id="mainNav">
    <div class="container"><a class="navbar-brand" href="#page-top">first time</a>
        <button data-bs-toggle="collapse" data-bs-target="#navbarResponsive" class="navbar-toggler navbar-toggler-right"
                type="button" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><i
                class="fa fa-align-justify"></i></button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item"><a class="nav-link" href="#about">About</a></li>
                <li class="nav-item"><a class="nav-link" href="#optimisation">Optimisation</a></li>
                <li class="nav-item"><a class="nav-link" href="#map-section">Map</a></li>
                <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li>
            </ul>
        </div>
    </div>
</nav>
<header class="text-center text-white d-flex masthead" style="background-image:url('/img/header.jpg');">
    <div class="container my-auto">
        <div class="row">
            <div class="col-lg-10 mx-auto">
                <h1 class="text-uppercase"><strong>КОМАНДА "ПЕРВЫЙ РАЗ"</strong></h1>
                <hr>
            </div>
        </div>
        <div class="col-lg-8 mx-auto">
            <p class="text-faded mb-5">Представляем решение по Треку №3, Мерчендайзеры</p><a
                class="btn btn-primary btn-xl" role="button" href="#about">ПЕРЕЙТИ К РЕШЕНИЮ</a>
        </div>
    </div>
</header>
<section id="about" class="bg-primary">
    <div class="container">
        <div class="row">
            <div class="col offset-lg-8 text-center mx-auto">
                <h2 class="text-white section-heading">Наше решение</h2>
                <hr class="light my-4">
                <p class="text-faded mb-4">Оптимизация общего маршрута с использованием метода имитации отжига</p>
                <p class="text-faded mb-4"><br>Итеративный проход по маршруту с соблюденеим условий для распределения по мерчендайзерам
                </p>
                <p class="text-faded mb-4"><br>Повторная оптимизация маршрута для каждого мерчендайзера на каждый день (отжиг/перебор)
                </p>

                <hr class="light my-4">
            </div>
        </div>
        <div class="row">
            <div class="col offset-lg-8 text-center mx-auto" style="color: #ffffff">
                <form id="file-form" name="file_form" method="post" enctype="multipart/form-data" action="/api/process">
                    <div class="col offset-lg-4 text-center mx-auto">
                        <input id="files" type="file" required multiple name="files" accept="text/csv">
                    </div>

                    <div class="col offset-lg-8 text-center mx-auto" style="padding: 50px">
                        <input class="btn btn-light btn-xl" type="submit" form="file-form"
                               value="РАССЧИТАТЬ">
                    </div>
                </form>
            </div>
        </div>

    </div>
</section>
<section id="optimisation">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
                <h2 class="section-heading">Показатели оптимизации</h2>
                <hr class="my-4">
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-md-4 text-center">
                <div class="mx-auto service-box mt-5"><i class="fas fa-walking fa-4x text-primary mb-3 sr-icons"
                                                         data-aos="fade" data-aos-duration="200" data-aos-delay="200"
                                                         data-aos-once="true"></i>
                    <h5 class="mb-3">Число мерчендайзеров</h5>
                    <p class="mb-0">
                        <span th:if="${stats?.getMerchAmount__pctChange() == '0 %'}">Не изменилось</span>
                        <span id="mm-amount" th:unless="${stats?.getMerchAmount__pctChange() == '0 %'}"
                              th:text="${stats?.getMerchAmount__pctChange()} ?: '--'"></span>
                        <span></span>
                    </p>
                </div>
            </div>
            <div class="col-md-4 text-center">
                <div class="mx-auto service-box mt-5"><i class="fas fa-route fa-4x text-primary mb-3 sr-icons"
                                                         data-aos="zoom-in" data-aos-duration="200" data-aos-delay="400"
                                                         data-aos-once="true"></i>
                    <h5 class="mb-3">Суммарная средняя траектория</h5>
                    <p class="mb-0">
                        <span th:if="${stats?.getAvgRoute__pctChange() == '0 %'}">Не изменилась</span>
                        <span id="avg-route" th:unless="${stats?.getAvgRoute__pctChange() == '0 %'}"
                              th:text="${stats?.getAvgRoute__pctChange()} ?: '--'"></span>

                    </p>
                </div>
            </div>
            <div class="col-md-4 text-center">
                <div class="mx-auto service-box mt-5"><i class="fas fa-user-clock fa-4x text-primary mb-3 sr-icons"
                                                         data-aos="zoom-in" data-aos-duration="200" data-aos-delay="600"
                                                         data-aos-once="true"></i>
                    <h5 class="mb-3">Средняя длительность рабочего дня</h5>
                    <p class="mb-0">
                        <span th:if="${stats?.getAvgWorkingHours__pctChange() == '0 %'}">Не изменилась</span>
                        <span id="avg-time" th:unless="${stats?.getAvgWorkingHours__pctChange() == '0 %'}"
                              th:text="${stats?.getAvgWorkingHours__pctChange()} ?: '--'"></span>
                        </span>
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>
<section id="map-section">
    <div class="container">
        <div id="map">
            <section class="map-clean" style="margin-top: -300px;">
                <div class="container">
                    <div class="col offset-lg-8 text-center mx-auto">
                        <p class="text-faded mb-4">Выбираем мерчендайзера и его рабочий день</p>
                    </div>
                </div>
                <div style="margin: 21px;">
                    <form action="/api/find">
                        <div class="row">
                            <div class="col text-center">
                                <select name="merch" class="form-select" id="merch-id">
                                    <option>Выбрать мерчендайзера</option>
                                    <option th:each="option: ${options}" th:value="${option}"
                                            th:text="${option}"></option>
                                </select>
                            </div>
                            <div class="col text-center">
                                <div id="btn-group-id" class="btn-group" role="group" style="width: 80%;">
                                    <button id="Monday" class="btn btn-primary" type="button" disabled
                                            onclick="redraw($(this).attr('id'))">ПН
                                    </button>
                                    <button id="Tuesday" class="btn btn-primary" type="button" disabled
                                            onclick="redraw($(this).attr('id'))">ВТ
                                    </button>
                                    <button id="Wednesday" class="btn btn-primary" type="button" disabled
                                            onclick="redraw($(this).attr('id'))">СР
                                    </button>
                                    <button id="Thursday" class="btn btn-primary" type="button" disabled
                                            onclick="redraw($(this).attr('id'))">ЧТ
                                    </button>
                                    <button id="Friday" class="btn btn-primary" type="button" disabled
                                            onclick="redraw($(this).attr('id'))">ПТ
                                    </button>
                                    <button id="Saturday" class="btn btn-primary" type="button" disabled
                                            onclick="redraw($(this).attr('id'))">СБ
                                    </button>
                                    <button id="Sunday" class="btn btn-primary" type="button" disabled
                                            onclick="redraw($(this).attr('id'))">ВСК
                                    </button>
                                </div>
                            </div>

                        </div>
                    </form>
                </div>
                <iframe id="map-frame" allowfullscreen="" frameborder="0"
                        th:src="${url}"
                        width="100%" height="450"></iframe>
            </section>
        </div>
    </div>
</section>
<section class="text-white bg-dark">
    <div class="container text-center">
        <h2 class="mb-4">Выгрузить подробный отчет</h2>
        <th:block th:if="${options == null}">
            <p class="text-muted">
                Недоступно. Сначала нужно провести расчеты
            </p>
            <a id="download-btn" class="btn btn-secondary btn-xl sr-button"
               role="button" data-aos="zoom-in"
               data-aos-duration="400" data-aos-once="true" disabled="disabled">Download .ZIP</a>
        </th:block>
        <th:block th:unless="${options == null}">
            <a id="actual-download-btn" class="btn btn-light btn-xl sr-button"
               role="button" data-aos="zoom-in"
               data-aos-duration="400" data-aos-once="true"
               href="/api/download">Download .ZIP</a>
        </th:block>
    </div>
</section>
<section id="contact">
    <div class="container">
        <!-- Start: Team with rotating cards -->
        <section id="contact-card" class="card-section-imagia" style="background: rgb(255,255,255);">
            <!-- Start: H1 -->
            <h1>Наша команда</h1><!-- End: H1 -->
            <!-- Start: H2 -->
            <h2>first time</h2><!-- End: H2 -->
            <div class="container">
                <!-- Start: Swiper Slider Card For Blog Or Product -->
                <div class="blog-slider">
                    <div class="blog-slider__wrp swiper-wrapper">
                        <!-- Start: 1st Slide -->
                        <div class="blog-slider__item swiper-slide">
                            <div></div>
                            <div class="blog-slider__img"><img src="/img/contacts/losha.jpg"></div>
                            <div class="blog-slider__content">
                                <div class="blog-slider__title">Чайка Алексей</div>
                                <div class="blog-slider__text">
                                    <p style="text-align: left">ITMO University
                                        <br>
                                        <br>- Java
                                        <br>- Backend: Spring w/ Thymeleaf
                                        <br>- Frontend: HTML, CSS, JS
                                    </p></div>
                                <!-- Start: Social Icons -->
                                <div class="icons">
                                    <a href="https://t.me/trafalgande"><i class="fab fa-telegram"></i></a>
                                    <a href="https://www.instagram.com/trafalgande"><i class="fab fa-instagram"></i></a>
                                    <a href="https://www.github.com/trafalgande"><i class="fab fa-github"></i></a>
                                </div>
                                <!-- End: Social Icons -->
                            </div>
                        </div><!-- End: 1st Slide -->
                        <!-- Start: 2nd Slide -->
                        <div class="blog-slider__item swiper-slide">
                            <div></div>
                            <div class="blog-slider__img"><img src="/img/contacts/toha.jpg"></div>
                            <div class="blog-slider__content">
                                <div class="blog-slider__content">

                                    <div class="blog-slider__title">Чангалиди Антон</div>

                                    <div class="blog-slider__text">
                                        <p style="text-align: left">
                                            ITMO University
                                            <br>Bioinformatics
                                            institute
                                            <br>
                                            <br>- Python
                                            <br>- Data scientist
                                            <br>- Machine learning developer
                                        </p></div>
                                    <!-- Start: Social Icons -->
                                    <div class="icons">
                                        <a href="https://t.me/TohaRhymes"><i class="fab fa-telegram"></i></a>
                                        <a href="https://www.instagram.com/toha_rhymes/"><i
                                                class="fab fa-instagram"></i></a>
                                        <a href="https://github.com/TohaRhymes"><i class="fab fa-github"></i></a>
                                    </div>
                                    <!-- End: Social Icons -->
                                </div>
                            </div>
                        </div><!-- End: 2nd Slide -->
                        <!-- Start: 3rd Slide -->
                        <div class="blog-slider__item swiper-slide">
                            <div></div>
                            <div class="blog-slider__img"><img src="/img/contacts/rostik.jpg"></div>
                            <div class="blog-slider__content">
                                <div class="blog-slider__content">

                                    <div class="blog-slider__title">Давыдов Ростислав</div>

                                    <div class="blog-slider__text">
                                        <p style="text-align: left">
                                            ITMO University
                                            <br>
                                            <br>- Python
                                            <br>- Machine learning developer
                                            <br>- Financial addicted
                                        </p></div>
                                    <!-- Start: Social Icons -->
                                    <div class="icons">
                                        <a href="https://t.me/Rostislavdavydov"><i class="fab fa-telegram"></i></a>
                                        <a href="https://www.instagram.com/therostislavdavydov"><i
                                                class="fab fa-instagram"></i></a>
                                    </div>
                                    <!-- End: Social Icons -->
                                </div>
                            </div>
                        </div><!-- End: 3rd Slide -->
                        <div class="blog-slider__pagination"></div>
                    </div>
                </div><!-- End: Swiper Slider Card For Blog Or Product -->
            </div>
        </section><!-- End: Team with rotating cards -->
    </div>
</section><!-- Start: Footer Basic -->
<footer class="footer-basic" style="background-color: #21252a">
    <!-- Start: Links -->
    <ul class="list-inline">
        <li class="list-inline-item"><a style="text-decoration-color: #f4f4f4" href="#page-top">Home</a></li>
        <li class="list-inline-item"><a style="text-decoration-color: #f4f4f4" href="#about">About</a></li>
        <li class="list-inline-item"><a style="text-decoration-color: #f4f4f4" href="#optimisation">Optimisation</a>
        </li>
        <li class="list-inline-item"><a style="text-decoration-color: #f4f4f4" href="#map-section">Map</a></li>
        <li class="list-inline-item"><a style="text-decoration-color: #f4f4f4" href="#contact">Contact</a></li>
    </ul>
    <!-- End: Links -->
    <!-- Start: Copyright -->
    <p class="copyright">First Time © 2021</p><!-- End: Copyright -->
</footer><!-- End: Footer Basic -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/baguettebox.js/1.10.0/baguetteBox.min.js"></script>
<script th:src="@{/bootstrap/js/bootstrap.min.js}"></script>
<script th:src="@{/js/bs-init.js}"></script>
<script th:src="@{/js/creative.js}"></script>
<script th:src="@{/js/responsive-blog-card-slider-1.js}"></script>
<script th:src="@{/js/responsive-blog-card-slider.js}"></script>

<script>
    function redraw(val) {
        let merch_ = $('#merch-id').val()
        $.ajax({
            type: 'GET',
            url: '/api/find',
            data: {
                'merch': merch_,
                'weekDay': val
            }
        }).done(function (msg) {
            console.log(msg)
            $('#map-frame').attr('src', msg)
        })
    }

    $('#merch-id').on('change', function () {
        $.each($('#btn-group-id'), function () {
            $('button').attr('disabled', true)
        })

        let merch_ = $(this).val()
        $.ajax({
            type: 'GET',
            url: '/api/week',
            data: {'merch': merch_}
        }).done(function (msg) {
            for (let m in msg) {
                $('#' + msg[m]).animate({
                        disabled: true
                    }, 500, "swing", function () {
                        $('#' + msg[m]).attr('disabled', false)
                    }
                )
            }
            console.log(msg)
        })
    });


    if (parseFloat($('#mm-amount').val().split(' ')[0]) > 0)
        $('#mm-amount').attr('style', 'color: #4aa04a')
    else if ($('#mm-amount').text() === '--')
        console.log('ignore')
    else
        $('#mm-amount').attr('style', 'color: #A04A4A')


    if (parseFloat($('#avg-route').val().split(' ')[0]) > 0)
        $('#avg-route').attr('style', 'color: #A04A4A')
    else if ($('#avg-route').text() === '--')
        console.log('ignore')
    else
        $('#avg-route').attr('style', 'color: #4aa04a')


    if (parseFloat($('#avg-time').val().split(' ')[0]) > 0)
        $('#avg-time').attr('style', 'color: #A04A4A')
    else if ($('#avg-time').text() === '--')
        console.log('ignore')
    else
        $('#avg-time').attr('style', 'color: #4aa04a')


</script>
</body>

</html>
